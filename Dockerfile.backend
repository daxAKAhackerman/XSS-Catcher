FROM python:3.10

ENV DEBIAN_FRONTEND noninteractive
RUN apt-get update && apt-get install -y postgresql-client
RUN apt-get clean && apt-get autoremove --purge && rm -rf /var/lib/apt/lists/*

COPY ./server /var/www/html/server
RUN rm -f /var/www/html/server/app.db &> /dev/null || true
WORKDIR /var/www/html/server
RUN python3 -m pip install -r /var/www/html/server/requirements.txt
RUN chmod +x *.sh

EXPOSE 8080
